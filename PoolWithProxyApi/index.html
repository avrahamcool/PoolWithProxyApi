<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>Connection tester</title>
</head>
<body>
	<label>
		<span>UserName:</span>
		<input id="userNameTxt" value="USER_A" />
	</label>
	<label>
		<span>Connections:</span>
		<input id="connectionsTxt" type="number" value="100" />
	</label>
	<button id="stressTestBtn">Stress Test</button>

	<div style="padding: 5rem;">
		Script for creating the table needed by this demo:
		<pre>
CREATE TABLE CONNECTION_TESTER
(
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY,
    INSERT_DATE DATE DEFAULT SYSDATE,
    USERNAME VARCHAR2(50) NOT NULL,
    PRIMARY KEY(ID)
);
		</pre>

		<p>Chane the ProxyConnectionString in web.config accordingly</p>
		<p>Change the SchemaName in ConnectionTesterConfig file</p>
	</div>
	<script>
		const userNameTxt = document.getElementById("userNameTxt");
		const connectionsTxt = document.getElementById("connectionsTxt");

		document.getElementById("stressTestBtn").addEventListener("click", () => {
			const url = `api/connectiontester?username=${userNameTxt.value}`;
			Array(connectionsTxt.valueAsNumber)
				.fill()
				.forEach(_ => fetch(url, { method: "POST" }));
		});
	</script>
</body>
</html>